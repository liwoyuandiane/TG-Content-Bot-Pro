# TG-Content-Bot-Pro 系统兼容性改进说明

## 概述

本次更新改进了 TG-Content-Bot-Pro 项目对不同 Linux 发行版的支持，使其能够自动识别系统类型并在 Alpine、Ubuntu、Debian、CentOS 等常用 Linux 系统上正常运行。

## 主要改进

### 1. install.sh 脚本改进

#### 多系统包管理器支持
- **Debian/Ubuntu 系列**：使用 `apt` 包管理器
- **CentOS/RHEL 系列**：使用 `yum` 包管理器
- **Fedora 系列**：使用 `dnf` 包管理器
- **Alpine Linux**：使用 `apk` 包管理器
- **Arch Linux**：使用 `pacman` 包管理器
- **openSUSE**：使用 `zypper` 包管理器

#### 包名适配
针对不同系统提供了正确的包名映射：
- Alpine Linux: `py3-pip` 替代 `python3-pip`，`python3-dev` 替代 `python3-venv`
- Arch Linux: `python-pip` 替代 `python3-pip`，`python` 替代 `python3-venv`

#### 虚拟环境优化
为 Alpine Linux 提供特殊处理：
- 使用 `--without-pip` 参数创建虚拟环境
- 单独安装 pip：`curl -sSL https://bootstrap.pypa.io/get-pip.py | python3`

### 2. start.sh 脚本改进

#### 系统检测功能
添加了 `detect_system()` 函数，能够识别：
- 基于 `/etc/os-release` 的现代 Linux 发行版
- 使用 `lsb_release` 的系统
- 传统的 `/etc/debian_version` 和 `/etc/redhat-release` 文件
- Alpine Linux 特殊处理
- 通用的 `uname` 命令回退

### 3. AGENTS.md 文档更新

#### 准确性改进
- 修正了文件路径引用（`SaveRestrictedContentBot` → `TG-Content-Bot-Pro`）
- 更新了插件文件列表，反映实际的文件结构
- 修正了核心消息流的描述，匹配实际实现
- 更新了数据库和任务队列的引用路径

## 支持的系统

1. **Ubuntu/Debian 系列**
2. **CentOS/RHEL 系列**
3. **Fedora**
4. **Alpine Linux**
5. **Arch Linux**
6. **openSUSE**

## 使用方法

安装脚本会自动检测系统类型并使用相应的包管理器安装依赖。

```bash
# 一键安装
bash <(curl -fsSL https://raw.githubusercontent.com/liwoyuandiane/TG-Content-Bot-Pro/main/install.sh)
```

## 技术细节

### 包管理器检测顺序
1. `apt` (Debian/Ubuntu)
2. `dnf` (Fedora)
3. `yum` (CentOS/RHEL)
4. `apk` (Alpine Linux)
5. `pacman` (Arch Linux)
6. `zypper` (openSUSE)

### Alpine Linux 特殊处理
由于 Alpine Linux 使用 musl libc 而不是 glibc，需要特殊处理：
- 使用 `--without-pip` 创建虚拟环境
- 手动安装 pip
- 使用 Alpine 特定的包名

## 提交信息

提交者： liwoyuandiane
提交信息： 支持 Alpine、Ubuntu、Debian、CentOS 等常用 Linux 系统自动识别和运行

修改文件：
- AGENTS.md
- install.sh
- start.sh